---
title: "Gapminder-Exploration"
output: github_document
---
```{r}
options(warn = -1) # supresses warnings
suppressPackageStartupMessages(library(tidyverse))
suppressPackageStartupMessages(library(gapminder))
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

```{r}
library(gapminder)
library(tidyverse)
```

## Factor Management

We first check the number of levels for the country and continent variables before filtering and dropping unused factor levels. We also check the number of rows the dataset has.
```{r}
gapminder %>%
  str() 
```

Now apply filtering and dropping of levels.
```{r}
gapminder %>%
  filter(continent != "Oceania") %>% # remove rows with continent equal to Oceania
  droplevels() %>%
  str()
```

The country factor went from 142 levels to 140 levels, the continent factor went from 5 levels to 4 levels (since we drop Oceania), and the number of rows went from 1704 to 1680.

## File I/O

```{r}
gapminderExpMax <- gapminder %>%
  group_by(continent) %>%
  summarize(maxLifeExp = max(lifeExp))

write_csv(gapminderExpMax, "ModifiedDataset")
modifiedDataset = read_csv("ModifiedDataset")
modifiedDataset %>%
  str()
```
## Visualization Design

## Writing Figures to a File

```{r}
df <- gapminder %>%
  filter(year == 2007) # keep only the rows with year == 2007
plot <- ggplot(df, aes(lifeExp, gdpPercap)) +
  geom_point() +
  xlab("Life Expectancy") +
  ylab("GDP per capita") +
  ggtitle("GDP per capita versus Life Expectancy")
ggsave("GDP-LifeExp-plot.png", plot, width = 11, height = 8, dpi = "retina") # save plot to file
```

![Plot](https://github.com/STAT545-UBC-students/hw05-curtis77/blob/master/GDP-LifeExp-plot.png)
